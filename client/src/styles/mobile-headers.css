/* Mobile Column Header Positioning Fix */

/* Top header heights */
:root {
  --top-header-height-desktop: 64px;
  --top-header-height-mobile: 48px;
  --column-header-height: 36px;
}

/* Force remove all spacing from potential parent containers */
@media (max-width: 640px) {
  .virtual-bible-table,
  .bible-table-wrapper,
  [data-testid="bible-table"] {
    margin: 0 !important;
    padding: 0 !important;
  }
  
  /* Target any wrapper divs that might be adding space */
  .virtual-bible-table > div,
  .bible-table-wrapper > div {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
}

/* Mobile-specific header positioning */
@media (max-width: 640px) {
  /* Ensure column headers are positioned correctly below top header */
  .column-headers-container {
    position: sticky !important;
    top: 48px !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 40 !important; /* Below top header (z-50) but above content */
    height: var(--column-header-height) !important;
    background: white !important;
    border-bottom: 1px solid #e5e7eb !important;
    margin: 0 !important;
    padding: 0 !important;
    transform: none !important;
  }
  
  /* Override any parent container positioning that might interfere */
  .column-headers-container * {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Dark mode support */
  .dark .column-headers-container {
    background: #1f2937 !important;
    border-bottom-color: #374151 !important;
  }

  /* Fix main content positioning to account for sticky headers */
  .bible-content-container {
    margin-top: calc(var(--top-header-height-mobile) + var(--column-header-height)) !important;
    height: calc(100vh - var(--top-header-height-mobile) - var(--column-header-height)) !important;
    overflow-y: auto !important;
  }

  /* Ensure no gap between headers */
  .top-header-mobile {
    height: var(--top-header-height-mobile) !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 50 !important;
  }

  /* Column header cells responsive sizing */
  .column-header-cell {
    flex-shrink: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-right: 1px solid #e5e7eb !important;
    font-weight: 600 !important;
    font-size: 0.75rem !important;
    line-height: 1 !important;
    height: var(--column-header-height) !important;
  }

  .dark .column-header-cell {
    border-right-color: #374151 !important;
  }

  /* Reference column mobile sizing */
  .column-header-cell[data-column="reference"] {
    width: 24px !important;
  }

  /* Main translation mobile sizing */
  .column-header-cell[data-column="main"] {
    width: calc((100vw - 60px) * 0.48) !important;
  }

  /* Cross references mobile sizing */  
  .column-header-cell[data-column="cross-refs"] {
    width: calc((100vw - 60px) * 0.48) !important;
  }

  /* Prophecy columns mobile sizing */
  .column-header-cell[data-column="prophecy"] {
    width: 64px !important;
  }

  /* Notes column mobile sizing */
  .column-header-cell[data-column="notes"] {
    width: 80px !important;
  }

  /* Landscape phone adjustments */
  @media (min-width: 667px) and (max-width: 896px) and (orientation: landscape) {
    .column-header-cell[data-column="reference"] {
      width: 32px !important;
    }
    
    .column-header-cell[data-column="main"],
    .column-header-cell[data-column="cross-refs"] {
      width: calc((100vw - 80px) * 0.46) !important;
    }
  }

  /* Tablet adjustments */
  @media (min-width: 768px) and (max-width: 1024px) {
    .column-header-cell[data-column="reference"] {
      width: 40px !important;
    }
    
    .column-header-cell[data-column="main"],
    .column-header-cell[data-column="cross-refs"] {
      width: calc((100vw - 100px) * 0.45) !important;
    }
  }
}

/* Desktop positioning (ensure no conflicts) */
@media (min-width: 641px) {
  .column-headers-container {
    position: sticky !important;
    top: var(--top-header-height-desktop) !important;
    z-index: 40 !important;
    height: var(--column-header-height) !important;
  }

  .bible-content-container {
    margin-top: calc(var(--top-header-height-desktop) + var(--column-header-height)) !important;
    height: calc(100vh - var(--top-header-height-desktop) - var(--column-header-height)) !important;
  }
}

