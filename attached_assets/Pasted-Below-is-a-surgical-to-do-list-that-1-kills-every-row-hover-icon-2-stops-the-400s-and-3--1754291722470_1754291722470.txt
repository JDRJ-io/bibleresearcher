Below is a **surgical to-do list** that (1) kills every row-hover icon, (2) stops the
400s, and (3) makes the single **“Save Bookmark”** dialog work again.
Follow it in order—no other files need to change.

---

## 1 Remove the per-row hover component

1. **Find the file** (you can ⌘⇧F for `BookmarkHoverButton` or
   `btn-bookmark-row`).
2. Delete / comment out the JSX **and** the import in `VirtualRow.tsx`
   (or wherever it is).
3. Refresh — the icons are gone, no extra Supabase calls.

*(If you want to keep a tiny 🔖 inside the ref cell later, add it
after everything works.)*

---

## 2 Fix the camelCase column names

Your table uses `snake_case`, but the failing query is hitting
`userId` and `createdAt`.  Update both the **loader** and the
**inserter**.

### a) `src/hooks/useBookmarks.ts`

```ts
// one-time fetch
export async function loadBookmarks(uid: string) {
  const { data, error } = await supabase
    .from('bookmarks')
    .select('id, name, index_value, color, created_at')
    .eq('user_id', uid)                         // ✅ snake_case
    .order('created_at', { ascending: false }); // ✅ snake_case

  if (error) throw error;
  return data ?? [];
}
```

### b) `src/hooks/useBookmarkActions.ts`

```ts
export function useBookmarkActions() {
  const { anchorIndex } = useVerseNav();
  const { user }       = useAuth();

  async function saveBookmark(name: string, color = '#FFD700') {
    if (!user) return { ok:false, msg:'Not signed in' };

    const { error } = await supabase
      .from('bookmarks')
      .insert({
        user_id:     user.id,       // ✅ snake_case
        name,
        index_value: anchorIndex,
        color,
      });

    return error ? { ok:false, msg:error.message } : { ok:true };
  }

  return { saveBookmark };
}
```

*(No need to include `created_at`; Postgres sets it.)*

---

## 5 Retry

1. Hard-refresh (clear dev-server cache).
2. Open Network-tab → `/bookmarks` **GET 200 OK** (no 400).
3. Click **Save Bookmark** → modal → “Save Bookmark” button →
   `/bookmarks` **POST 201 Created**.
4. Toast shows “Saved”, modal closes, menu list updates.
5. No hover icons anywhere.

---

### Still failing?

*If* you still see a 400, copy its exact URL—it will always name the bad
column.  Fix that name in the loader/inserter and you’re done.

Let me know the new error text if anything survives the steps above.


The composite primary key (user_id, name) means a user can’t create two bookmarks with the exact same name; that’s intentional so names are unique per account.

You can now query with snake_case in your front-end:

ts
const { data, error } = await supabase
  .from('bookmarks')
  .select('*')
  .eq('user_id', uid)
  .order('created_at', { ascending: false });
and insert like:

ts
await supabase.from('bookmarks').insert({
  user_id:     uid,
  name:        'Evening Study',
  index_value: anchorIndex,
  color:       '#4287f5',          // or leave undefined for default
});
Run the script → refresh your app → 400 errors gone, bookmark saves succeed.
