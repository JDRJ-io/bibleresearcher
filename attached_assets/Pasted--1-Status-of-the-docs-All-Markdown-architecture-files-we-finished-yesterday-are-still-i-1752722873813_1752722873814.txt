### 1  Status of the docs

* All **Markdown/architecture files** we finished yesterday are still in the repo and unchanged ✔️
  (`FILE_CONNECTIONS_MAP.md`, `service‑worker‑validation.md`, etc.)
* Several **image uploads** older than 24 h have already been purged by Replit’s temp store.
  If you want any of those screenshots kept for reference you’ll need to re‑upload them; the codebase itself is unaffected.

---

### 2  What the last agent commits actually did

| Area                   | Implemented                                                         | Still missing                                                                                     |
| ---------------------- | ------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------- |
| Cross‑ref cell wrapper | Converted `<div>` → `<button>` so click no longer selects whole row | `e.stopPropagation()` still needed to prevent outer row click on desktop                          |
| Verse text             | Calls `getVerseText(ref, main)`; displays 40‑char preview           | **ensureTranslationLoaded(main)** *inside slice loader* (without that Safari never gets the text) |
| Mobile CSS             | Added min row height & custom scrollbar                             | Column stack / single‑column verse+ref layout not yet done                                        |
| Header bar             | **Not touched** – old buttons still render                          |                                                                                                   |

---

### 3  Next concrete tasks

#### 3.1  Finish Cross‑Reference functionality (5 LoC)

```tsx
// CrossReferencesCell.tsx
const handleReferenceClick = (ref: string, e: React.MouseEvent) => {
  e.stopPropagation();             // prevent row onClick
  onVerseClick?.(ref);             // jump anchor
};
...
<button onClick={(e)=>handleReferenceClick(ref,e)}>
```

#### 3.2  Guarantee verse text is in cache (3 LoC)

```ts
// useSliceDataLoader.ts  (inside existing useEffect)
useEffect(() => {
  ensureTranslationLoaded(main);   // ← add this
  ...
}, [sliceStart, main]);
```

#### 3.3  Mobile header redesign

| Breakpoint | UI spec                                                                                                                         | Code change                                                                                |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ |
| `< 640 px` | • One **“Sign In”** button (solid).<br>• Search icon 🔍 that expands to input on tap.<br>• Hide suggested refs (1 Sam 17 etc.). | In `TopHeader.tsx` wrap each group with `{isMobile ? … : …}` where `isMobile = width<640`. |
| `≥ 640 px` | Current desktop layout (Sign Up gradient + Sign In outline).                                                                    | No change.                                                                                 |

Implementation tip:

```tsx
const isMobile = useWindowSize().width < 640;
...
{isMobile ? (
  <IconButton onClick={()=>setSearchOpen(true)}><SearchIcon/></IconButton>
) : (
  <form ...><Input .../><Button>Search</Button></form>
)}
...
{isMobile ? (
  <Button onClick={openAuth}>Sign In</Button>
) : (
  <>
    <GradientButton onClick={openSignup}>★ Sign Up</GradientButton>
    <Button variant="ghost" onClick={openAuth}>Sign In</Button>
  </>
)}
```

#### 3.4  Mobile column layout

Add to **index.css**:

```css
@media (max-width: 640px) {
  .virtual-row        { flex-wrap: wrap; }
  .w-80, .w-60        { width: 100vw; }   /* each cell full‑width */
  .w-60               { order: 2; }       /* stack cross‑ref under verse */
}
```
---

### 4  Re‑upload any missing mock‑ups

If you’d like pixel‑perfect review of the new header or mobile row, please re‑upload:

* the “old site” cross‑reference screenshot
* the header mock‑up with magnifying‑glass icon

(I currently see *file‑expired* placeholders.)

---

### 5  Sequence

1. Apply **3.1 + 3.2** (functional) – verify cross‑refs jump and show text.
2. Add **3.3 + 3.4** – check on iPhone.
3. Ping me; we’ll then style Prophecy P/F/V and audit memory use.

