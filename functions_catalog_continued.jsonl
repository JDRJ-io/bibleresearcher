{"file":"client/src/components/user/BookmarkButton.tsx","lines":"22-156","symbol":"BookmarkButton","kind":"react_component","export":"named","signature":"(props: BookmarkButtonProps): JSX.Element | null","governs":{"ui":"renders bookmark creation dialog with color selection","state":"manages dialog state, bookmark name, and color selection","data":"none","routing":"none","side_effects":"bookmark database operations, toast notifications","auth":"requires user authentication for bookmark operations","errors":"handles bookmark save failures and validation","dependencies":["useAuth","useBookmarks","useToast","Dialog components"]},"calls":["useAuth","useBookmarks","useToast","useState","addBookmark","toast","console.log","console.error"],"called_by":["verse action components"],"related_files":["client/src/hooks/useBookmarks.ts"],"query_or_table_refs":["bookmarks"],"notes":"Bookmark button: dialog with name input, 6 color options, authentication check, error handling, loading states"}
{"file":"client/src/components/user/BookmarkButton.tsx","lines":"52-79","symbol":"handleSaveBookmark","kind":"function","export":"internal","signature":"(): Promise<void>","governs":{"ui":"none","state":"manages dialog closure and form reset","data":"none","routing":"none","side_effects":"bookmark creation, toast notifications, form state reset","auth":"none directly","errors":"handles bookmark creation failures with toast messages","dependencies":["addBookmark","toast","useState"]},"calls":["addBookmark","toast","setIsOpen","setBookmarkName","setColor","console.error"],"called_by":["save bookmark button"],"related_files":[],"query_or_table_refs":[],"notes":"Save handler: validates name, creates bookmark, shows success/error toasts, resets form state"}
{"file":"client/src/components/user/BookmarksList.tsx","lines":"21-308","symbol":"BookmarksList","kind":"react_component","export":"named","signature":"(props: BookmarksListProps): JSX.Element","governs":{"ui":"renders paginated list of user bookmarks with edit/delete actions","state":"manages editing state, delete confirmation, and form data","data":"none","routing":"none","side_effects":"bookmark database operations, navigation callbacks","auth":"requires user authentication for bookmark operations","errors":"handles bookmark update/delete failures","dependencies":["useAuth","useQuery","useMutation","useQueryClient","useToast","Dialog components"]},"calls":["useAuth","useQuery","useMutation","useQueryClient","useToast","useState","supabase.from","formatDistanceToNow","console.log","console.error","toast"],"called_by":["bookmark management interfaces"],"related_files":["@shared/schema"],"query_or_table_refs":["bookmarks"],"notes":"Bookmarks list: direct Supabase queries, edit/delete mutations, navigation callbacks, loading states, empty states"}
{"file":"client/src/components/user/BookmarksList.tsx","lines":"48-63","symbol":"updateBookmark","kind":"mutation","export":"internal","signature":"useMutation configuration","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"database update operations, query cache invalidation","auth":"requires authenticated user","errors":"handles database update failures","dependencies":["supabase","useQueryClient"]},"calls":["supabase.from.update","queryClient.invalidateQueries"],"called_by":["bookmark edit functionality"],"related_files":[],"query_or_table_refs":["bookmarks"],"notes":"Update mutation: uses composite key (user_id + name), invalidates cache on success"}
{"file":"client/src/components/user/BookmarksList.tsx","lines":"66-91","symbol":"deleteBookmark","kind":"mutation","export":"internal","signature":"useMutation configuration","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"database deletion operations, query cache invalidation, toast notifications","auth":"requires authenticated user","errors":"handles database deletion failures with error toasts","dependencies":["supabase","useQueryClient","useToast"]},"calls":["supabase.from.delete","queryClient.invalidateQueries","toast","console.error","setDeletingBookmark"],"called_by":["bookmark delete functionality"],"related_files":[],"query_or_table_refs":["bookmarks"],"notes":"Delete mutation: uses composite key (user_id + name), shows success/error toasts, clears delete state"}
{"file":"client/src/components/user/NotesCell.tsx","lines":"18-139","symbol":"NotesCell","kind":"react_component","export":"named","signature":"(props: NotesCellProps): JSX.Element","governs":{"ui":"renders dual-mode notes interface with editing and viewing states","state":"manages note text, editing mode, and existing note tracking","data":"none","routing":"none","side_effects":"auto-save operations, note database CRUD","auth":"requires user authentication for note operations","errors":"none directly","dependencies":["useAuth","useNotes","useDebouncedEffect","useToast","NotesTextWithLinks"]},"calls":["useAuth","useNotes","useDebouncedEffect","useToast","useState","useEffect","addNote","updateNote","deleteNote"],"called_by":["verse row components"],"related_files":["client/src/hooks/useNotes.ts","client/src/components/user/NotesTextWithLinks.tsx"],"query_or_table_refs":["notes"],"notes":"Notes cell: dual-mode interface, auto-save with 500ms debounce, hyperlink support, auto-delete empty notes, toggle between edit/view"}
{"file":"client/src/components/user/NotesTextWithLinks.tsx","lines":"16-66","symbol":"NotesTextWithLinks","kind":"react_component","export":"named","signature":"(props: NotesTextWithLinksProps): JSX.Element | null","governs":{"ui":"renders text with clickable verse reference hyperlinks","state":"none","data":"none","routing":"none","side_effects":"navigation callbacks for verse references","auth":"none","errors":"none","dependencies":["segmentTextWithReferences","Button","ExternalLink"]},"calls":["segmentTextWithReferences","map","preventDefault","stopPropagation","console.log","console.warn"],"called_by":["NotesCell component"],"related_files":["client/src/lib/verseReferenceParser.ts"],"query_or_table_refs":[],"notes":"Notes hyperlinks: parses verse references (Gen.1:1, John 3:16), creates clickable links with external icon, navigation callbacks"}
{"file":"client/src/components/bible/VirtualBibleTable.tsx","lines":"64-919","symbol":"VirtualBibleTable","kind":"react_component","export":"forwardRef","signature":"forwardRef<VirtualBibleTableHandle, VirtualBibleTableProps>","governs":{"ui":"renders virtualized Bible table with columns and rows","state":"manages anchor-based scrolling, scrollbar dragging, tooltip display","data":"coordinates data loading for visible verses","routing":"none","side_effects":"scroll management, data prefetching, query cache management","auth":"none directly","errors":"none directly","dependencies":["useAnchorSlice","useRowData","useTranslationMaps","useViewportLabels","VirtualRow","NewColumnHeaders"]},"calls":["useState","useRef","useEffect","useLayoutEffect","useCallback","useMemo","useImperativeHandle","useAuth","useToast","useQuery","useMutation","useQueryClient"],"called_by":["main Bible interface"],"related_files":["client/src/components/bible/VirtualRow.tsx","client/src/components/bible/NewColumnHeaders.tsx"],"query_or_table_refs":[],"notes":"Virtual Bible table: anchor-centered scrolling, responsive columns, label system integration, scroll tooltip, data loading coordination"}
{"file":"client/src/components/bible/VirtualBibleTable.tsx","lines":"131-134","symbol":"getCurrentVerse","kind":"function","export":"internal","signature":"(): { reference: string; index: number }","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"none","auth":"none","errors":"none","dependencies":["useCallback"]},"calls":["useCallback"],"called_by":["verse tracking functionality"],"related_files":[],"query_or_table_refs":[],"notes":"Current verse getter: returns reference and index from anchor position, provides fallback to first verse"}
{"file":"client/src/components/bible/VirtualRow.tsx","lines":"1-1056","symbol":"VirtualRow","kind":"react_component","export":"named","signature":"(props: VirtualRowProps): JSX.Element","governs":{"ui":"renders individual Bible verse row with multiple columns","state":"none directly","data":"none","routing":"none","side_effects":"none directly","auth":"none directly","errors":"none directly","dependencies":["ReferenceCell","CrossReferencesCell","ProphecyCell","NotesCell","VerseText","HoverVerseBar"]},"calls":["useEffect","useMemo","useState","getVisibleColumns","getColumnWidth","getDataRequirements"],"called_by":["VirtualBibleTable"],"related_files":["client/src/components/bible/LabeledText.tsx","client/src/components/user/NotesCell.tsx","client/src/components/highlights/VerseText.tsx"],"query_or_table_refs":[],"notes":"Virtual row: coordinate multiple column cells, responsive layout, label system integration, hover effects"}
{"file":"client/src/components/bible/VirtualRow.tsx","lines":"46-60","symbol":"ReferenceCell","kind":"react_component","export":"internal","signature":"(props: CellProps): JSX.Element","governs":{"ui":"renders verse reference column with responsive styling","state":"none","data":"none","routing":"none","side_effects":"none","auth":"none","errors":"none","dependencies":["useIsMobile"]},"calls":["useIsMobile"],"called_by":["VirtualRow"],"related_files":[],"query_or_table_refs":[],"notes":"Reference cell: displays verse reference, responsive mobile/desktop styling, glass morphism effects"}
{"file":"client/src/components/bible/VirtualRow.tsx","lines":"62-178","symbol":"CrossReferencesCell","kind":"react_component","export":"internal","signature":"(props: CellProps): JSX.Element","governs":{"ui":"renders cross-references with clickable links and text","state":"none","data":"none","routing":"none","side_effects":"navigation callbacks for cross-reference clicks","auth":"none","errors":"none","dependencies":["useBibleStore","LabeledText"]},"calls":["useBibleStore","handleCrossRefClick","renderTextWithLabels","map","getVerseText","console.log","console.warn","stopPropagation","preventDefault"],"called_by":["VirtualRow"],"related_files":["client/src/components/bible/LabeledText.tsx"],"query_or_table_refs":[],"notes":"Cross-references cell: clickable reference links, verse text display, label highlighting, touch event handling, optimization with dot format"}
{"file":"client/src/components/bible/VirtualRow.tsx","lines":"180-225","symbol":"ProphecyCell","kind":"react_component","export":"internal","signature":"(props: CellProps & { type: 'P' | 'F' | 'V' }): JSX.Element","governs":{"ui":"renders prophecy data for specific type (Prediction/Fulfillment/Verification)","state":"none","data":"none","routing":"none","side_effects":"none directly","auth":"none","errors":"none","dependencies":["useBibleStore","LabeledText"]},"calls":["useBibleStore","renderTextWithLabels","Array.from","Set"],"called_by":["VirtualRow"],"related_files":["client/src/components/bible/LabeledText.tsx"],"query_or_table_refs":[],"notes":"Prophecy cell: handles P/F/V types, removes duplicate prophecy IDs, label highlighting integration, handles missing prophecy data"}
{"file":"client/src/components/bible/NewColumnHeaders.tsx","lines":"52-535","symbol":"NewColumnHeaders","kind":"react_component","export":"named","signature":"(props: NewColumnHeadersProps): JSX.Element | null","governs":{"ui":"renders adaptive column headers with drag-and-drop, navigation arrows, and presentation mode","state":"manages presentation mode, drag state, and column width multiplier","data":"none","routing":"none","side_effects":"CSS custom property manipulation, column change signal emission","auth":"none","errors":"none","dependencies":["useTranslationMaps","useBibleStore","useAdaptivePortraitColumns","ColumnNavigationArrows","DndContext"]},"calls":["useState","useEffect","useCallback","useRef","useMemo","useSensors","useSensor","useTranslationMaps","useBibleStore","useAdaptivePortraitColumns","getComputedStyle","document.documentElement.style.setProperty"],"called_by":["VirtualBibleTable"],"related_files":["client/src/components/bible/ColumnNavigationArrows.tsx","client/src/hooks/useColumnChangeSignal.ts"],"query_or_table_refs":[],"notes":"Column headers: adaptive widths with CSS calc expressions, presentation mode toggle (2x width, 1.5x text, 1.35x height), drag-and-drop reordering, responsive layout"}
{"file":"client/src/components/bible/NewColumnHeaders.tsx","lines":"143-177","symbol":"togglePresentationMode","kind":"function","export":"internal","signature":"(): Promise<void>","governs":{"ui":"none","state":"manages presentation mode state and CSS variables","data":"none","routing":"none","side_effects":"CSS custom property manipulation, column change signal emission","auth":"none","errors":"none","dependencies":["useCallback","document.documentElement","useColumnChangeEmitter"]},"calls":["document.documentElement.style.setProperty","setIsPresentationMode","console.log","useColumnChangeEmitter"],"called_by":["presentation mode button"],"related_files":["client/src/hooks/useColumnChangeSignal.ts"],"query_or_table_refs":[],"notes":"Presentation toggle: scales width x2, text x1.5, row height x1.35, emits column change signals, toggles state"}
{"file":"client/src/components/bible/NewColumnHeaders.tsx","lines":"198-222","symbol":"getResponsiveWidth","kind":"function","export":"internal","signature":"(columnType: string): string","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"none","auth":"none","errors":"none","dependencies":["window.innerHeight","window.innerWidth"]},"calls":["window.innerHeight","window.innerWidth"],"called_by":["column width calculations"],"related_files":[],"query_or_table_refs":[],"notes":"Responsive width calculator: returns CSS calc expressions with column-width-mult variable, handles portrait/landscape modes"}
{"file":"client/src/components/bible/ColumnNavigationArrows.tsx","lines":"13-178","symbol":"ColumnNavigationArrows","kind":"react_component","export":"named","signature":"(props: ColumnNavigationArrowsProps): JSX.Element | null","governs":{"ui":"renders left/right navigation arrows with column indicator","state":"manages visible range state and navigation capabilities","data":"none","routing":"none","side_effects":"scroll event listening, column scrolling operations","auth":"none","errors":"none","dependencies":["useBibleStore","makeColumnScroller","ChevronLeft","ChevronRight"]},"calls":["useBibleStore","useMemo","useState","useEffect","buildActiveColumns","filter","map","makeColumnScroller","addEventListener","removeEventListener","console.log"],"called_by":["NewColumnHeaders"],"related_files":["client/src/utils/scrollNav.ts"],"query_or_table_refs":[],"notes":"Column navigation: left/right arrows with enable/disable states, column indicator (start-end/total), scroll event handling, column scroller integration"}
{"file":"client/src/components/bible/TopHeader.tsx","lines":"31-409","symbol":"TopHeader","kind":"react_component","export":"named","signature":"(props: TopHeaderProps): JSX.Element","governs":{"ui":"renders main application header with navigation, search, bookmarks, and user controls","state":"manages modal states, responsive layout detection","data":"none","routing":"handles back/forward navigation","side_effects":"bookmark creation, navigation callbacks, modal display","auth":"integrates user authentication and profile","errors":"handles bookmark creation failures","dependencies":["useAuth","useTheme","useToast","useMutation","BookmarkButton","UserProfileDropdown","AuthModals"]},"calls":["useAuth","useTheme","useToast","useMutation","useState","useWindowSize","useBibleStore","useAdaptiveScaling","supabase.from.upsert","queryClient.invalidateQueries","getCurrentCentralVerse","JSON.parse","localStorage.getItem"],"called_by":["main application layout"],"related_files":["client/src/components/user/BookmarkButton.tsx","client/src/components/auth/UserProfileDropdown.tsx","client/src/components/auth/AuthModals.tsx","client/src/components/bible/BookmarkModal.tsx"],"query_or_table_refs":["bookmarks"],"notes":"Top header: responsive mobile/desktop layouts, navigation controls, search integration, bookmark creation with Supabase, theme switching, authentication"}
{"file":"client/src/components/bible/TopHeader.tsx","lines":"58-78","symbol":"getCurrentCentralVerse","kind":"function","export":"internal","signature":"(): { reference: string; index: number }","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"localStorage access","auth":"none","errors":"handles errors with fallback verse","dependencies":["getCurrentVerse","localStorage","bibleStore"]},"calls":["getCurrentVerse","JSON.parse","localStorage.getItem","console.log","console.error"],"called_by":["bookmark creation"],"related_files":[],"query_or_table_refs":[],"notes":"Central verse getter: uses table ref or localStorage fallback, provides error handling with Gen.1:1 default"}
{"file":"client/src/components/bible/TopHeader.tsx","lines":"81-127","symbol":"createBookmarkMutation","kind":"mutation","export":"internal","signature":"useMutation configuration","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"bookmark database operations, query cache invalidation, toast notifications","auth":"requires authenticated user","errors":"handles bookmark creation failures with error toasts","dependencies":["useMutation","supabase","useQueryClient","useToast"]},"calls":["supabase.from.upsert","queryClient.invalidateQueries","toast","console.error","getCurrentCentralVerse"],"called_by":["bookmark save functionality"],"related_files":[],"query_or_table_refs":["bookmarks"],"notes":"Bookmark mutation: uses Supabase upsert with composite key (user_id, name), handles conflicts, invalidates cache, error handling"}
{"file":"client/src/components/bible/HamburgerMenu.tsx","lines":"27-576","symbol":"HamburgerMenu","kind":"react_component","export":"named","signature":"(props: HorizontalMenuProps): JSX.Element | null","governs":{"ui":"renders slide-out menu with tabbed interface for Bible study settings","state":"manages active tab, bookmark form, and local UI state","data":"none","routing":"none","side_effects":"bookmark creation, store state mutations, navigation callbacks","auth":"integrates user authentication for bookmarks","errors":"handles bookmark creation failures","dependencies":["useBibleStore","useAuth","useToast","useMutation","BookmarksList","LabelsLegend","MainTranslationSelector","AlternateTranslationSelector"]},"calls":["useState","useBibleStore","useAuth","useToast","useMutation","useQueryClient","apiRequest","toast","createBookmarkMutation.mutate","handleOverlayClick"],"called_by":["main application layout"],"related_files":["client/src/components/user/BookmarksList.tsx","client/src/components/bible/LabelsLegend.tsx","client/src/components/bible/MainTranslationSelector.tsx","client/src/components/bible/AlternateTranslationSelector.tsx"],"query_or_table_refs":["bookmarks"],"notes":"Hamburger menu: 8 tabbed sections (translations, labels, study tools, display, theme, bookmarks, docs), store integration, bookmark management"}
{"file":"client/src/components/bible/HamburgerMenu.tsx","lines":"73-98","symbol":"createBookmarkMutation","kind":"mutation","export":"internal","signature":"useMutation configuration","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"bookmark creation, query cache invalidation, toast notifications, form reset","auth":"requires authenticated user","errors":"handles bookmark creation failures with error toasts","dependencies":["useMutation","apiRequest","useQueryClient","useToast"]},"calls":["apiRequest","queryClient.invalidateQueries","toast","setShowBookmarkForm","setBookmarkName"],"called_by":["bookmark creation functionality"],"related_files":[],"query_or_table_refs":["bookmarks"],"notes":"Bookmark mutation: API request-based bookmark creation, cache invalidation, success/error handling, form state reset"}
{"file":"client/src/components/bible/MainTranslationSelector.tsx","lines":"13-59","symbol":"MainTranslationSelector","kind":"react_component","export":"named","signature":"(props: MainTranslationSelectorProps): JSX.Element","governs":{"ui":"renders radio group for main translation selection","state":"none","data":"none","routing":"none","side_effects":"translation loading, store updates, callback execution","auth":"none","errors":"handles translation switching failures","dependencies":["useTranslationMaps","useEnsureTranslationLoaded","RadioGroup","Label"]},"calls":["useTranslationMaps","useEnsureTranslationLoaded","ensureTranslationLoaded","setMain","console.log","console.error","onUpdate"],"called_by":["HamburgerMenu"],"related_files":["client/src/store/translationSlice.ts","client/src/hooks/useEnsureTranslationLoaded.ts"],"query_or_table_refs":[],"notes":"Main translation selector: 12 available translations, ensures data loading before switching, updates store, triggers re-renders"}
{"file":"client/src/components/bible/MainTranslationSelector.tsx","lines":"17-33","symbol":"handleMainChange","kind":"function","export":"internal","signature":"(value: string): Promise<void>","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"translation data loading, store updates, callback execution","auth":"none","errors":"handles translation loading failures","dependencies":["ensureTranslationLoaded","setMain","onUpdate"]},"calls":["ensureTranslationLoaded","setMain","onUpdate","console.log","console.error"],"called_by":["radio group value change"],"related_files":[],"query_or_table_refs":[],"notes":"Translation change handler: loads translation from Supabase, updates store, triggers re-render, comprehensive error handling"}
{"file":"client/src/lib/supabaseClient.ts","lines":"1-211","symbol":"supabaseClient","kind":"module","export":"named","signature":"Supabase client configuration and caching system","governs":{"ui":"none","state":"none","data":"provides central data access and caching infrastructure","routing":"none","side_effects":"global Supabase client creation, LRU cache management","auth":"none directly","errors":"handles missing environment variables","dependencies":["@supabase/supabase-js","globalThis"]},"calls":["createClient","console.log","console.error","Date.now","JSON.parse","supabase.storage.download"],"called_by":["all data access operations"],"related_files":["client/src/data/BibleDataAPI.ts"],"query_or_table_refs":[],"notes":"Supabase client: singleton pattern, LRU cache (max 12 translations), master cache for performance, verse keys loading, translation caching"}
{"file":"client/src/lib/supabaseClient.ts","lines":"34-84","symbol":"LRUCache","kind":"class","export":"internal","signature":"class LRUCache","governs":{"ui":"none","state":"manages cache entries with LRU eviction","data":"none","routing":"none","side_effects":"cache entry management, LRU eviction","auth":"none","errors":"none","dependencies":["Map","Date"]},"calls":["Map","Date.now","console.log"],"called_by":["masterCache operations"],"related_files":[],"query_or_table_refs":[],"notes":"LRU cache implementation: max 12 entries, timestamp and access count tracking, automatic eviction of oldest entries"}
{"file":"client/src/lib/supabaseClient.ts","lines":"90-116","symbol":"loadVerseKeys","kind":"function","export":"named","signature":"(): Promise<string[]>","governs":{"ui":"none","state":"manages verse keys cache","data":"none","routing":"none","side_effects":"Supabase storage download, cache population","auth":"none","errors":"handles storage download failures","dependencies":["supabase.storage","JSON.parse"]},"calls":["supabase.storage.from.download","data.text","JSON.parse","console.log","console.error"],"called_by":["verse navigation systems"],"related_files":[],"query_or_table_refs":[],"notes":"Verse keys loader: downloads from private anointed bucket, caches results, loads verseKeys-canonical.json"}
{"file":"client/src/lib/supabaseClient.ts","lines":"119-211","symbol":"loadTranslationSecure","kind":"function","export":"named","signature":"(translationId: string): Promise<Map<string, string>>","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"translation loading with master cache","auth":"none","errors":"handles translation loading failures","dependencies":["masterCache","supabase.storage"]},"calls":["masterCache.has","masterCache.get","console.log"],"called_by":["translation loading operations"],"related_files":[],"query_or_table_refs":[],"notes":"Secure translation loader: uses master cache, loads from private bucket, returns Map for verse lookup"}
{"file":"client/src/data/BibleDataAPI.ts","lines":"1-665","symbol":"BibleDataAPI","kind":"module","export":"named","signature":"Central data API for all Bible content operations","governs":{"ui":"none","state":"none","data":"provides unified interface for all Bible data (translations, cross-refs, prophecy, dates, labels)","routing":"none","side_effects":"Supabase storage operations, master cache management","auth":"none directly","errors":"handles storage failures and fallbacks","dependencies":["supabase","masterCache","offlineDB","queueSync"]},"calls":["supabase.storage.download","supabase.storage.upload","masterCache.has","masterCache.get","masterCache.set","JSON.parse","fetchFromStorage"],"called_by":["all Bible data consumers"],"related_files":["client/src/lib/supabaseClient.ts","client/src/offline/offlineDB.ts"],"query_or_table_refs":[],"notes":"Bible Data API: canonical bucket paths, master cache integration, translation/cross-ref/prophecy/dates/labels loading, offline support"}
{"file":"client/src/data/BibleDataAPI.ts","lines":"24-32","symbol":"fetchFromStorage","kind":"function","export":"named","signature":"(path: string): Promise<string>","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"Supabase storage download operations","auth":"none","errors":"handles storage download failures","dependencies":["supabase.storage"]},"calls":["supabase.storage.from.download","data.text"],"called_by":["all data loading operations"],"related_files":[],"query_or_table_refs":[],"notes":"Storage fetcher: downloads from anointed bucket, converts to text, centralized error handling"}
{"file":"client/src/data/BibleDataAPI.ts","lines":"70-79","symbol":"getOrFetch","kind":"function","export":"internal","signature":"<T>(key: string, fetchFn: () => Promise<T>): Promise<T>","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"master cache operations","auth":"none","errors":"none","dependencies":["masterCache"]},"calls":["masterCache.has","masterCache.get","masterCache.set"],"called_by":["all cached data operations"],"related_files":[],"query_or_table_refs":[],"notes":"Cache-or-fetch helper: checks master cache first, executes fetch function if needed, caches result"}
{"file":"client/src/data/BibleDataAPI.ts","lines":"81-113","symbol":"loadTranslation","kind":"function","export":"named","signature":"(id: string): Promise<Map<string, string>>","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"translation loading and caching","auth":"none","errors":"none","dependencies":["masterCache","fetchFromStorage","regex parsing"]},"calls":["masterCache.has","masterCache.get","fetchFromStorage","line.match","masterCache.set","console.log"],"called_by":["translation systems"],"related_files":[],"query_or_table_refs":[],"notes":"Translation loader: optimized regex parsing, immediate cache storage, returns Map for verse lookup, handles reference#text format"}
{"file":"client/src/data/BibleDataAPI.ts","lines":"121-153","symbol":"loadVerseKeys","kind":"function","export":"named","signature":"(chronological?: boolean): Promise<string[]>","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"verse keys loading with chronological/canonical fallback","auth":"none","errors":"handles missing chronological files with canonical fallback","dependencies":["getOrFetch","fetchFromStorage","JSON.parse"]},"calls":["getOrFetch","fetchFromStorage","JSON.parse","console.log","console.warn"],"called_by":["verse navigation and ordering systems"],"related_files":[],"query_or_table_refs":[],"notes":"Verse keys loader: supports canonical/chronological modes, automatic fallback to canonical if chronological missing, comprehensive logging"}
{"file":"client/src/data/BibleDataAPI.ts","lines":"44-68","symbol":"loadDatesMap","kind":"function","export":"named","signature":"(chronological?: boolean): Promise<Map<string, string>>","governs":{"ui":"none","state":"none","data":"none","routing":"none","side_effects":"dates data loading and parsing","auth":"none","errors":"none","dependencies":["getOrFetch","fetchFromStorage","Map"]},"calls":["getOrFetch","fetchFromStorage","split","trim","Map.set","console.log"],"called_by":["date display systems"],"related_files":[],"query_or_table_refs":[],"notes":"Dates map loader: parses verse_reference#date_info format, returns Map for verse lookup, supports canonical/chronological modes"}